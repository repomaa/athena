<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.31.1">

<link href="../../css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../../js/doc.js"></script>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>

  <meta id="repository-name" content="github.com/athena-framework/athena">
  <title>Athena::Routing::Controller - github.com/athena-framework/athena</title>
  <script type="text/javascript">
    CrystalDoc.base_path = "../../";
  </script>
</head>
<body>

<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="repository-links">
      <a href="../../index.html">README</a>
    </div>
  </div>

  <div class="search-results" class="hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class=" " data-id="github.com/athena-framework/athena/ACF" data-name="acf">
      <a href="../../ACF.html">ACF</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/ADI" data-name="adi">
      <a href="../../ADI.html">ADI</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/AED" data-name="aed">
      <a href="../../AED.html">AED</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/ART" data-name="art">
      <a href="../../ART.html">ART</a>
      
    </li>
  
  <li class="parent open current" data-id="github.com/athena-framework/athena/Athena" data-name="athena">
      <a href="../../Athena.html">Athena</a>
      
        <ul>
  
  <li class="parent " data-id="github.com/athena-framework/athena/Athena/Config" data-name="athena::config">
      <a href="../../Athena/Config.html">Config</a>
      
        <ul>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Config/Base" data-name="athena::config::base">
      <a href="../../Athena/Config/Base.html">Base</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Config/Configuration" data-name="athena::config::configuration">
      <a href="../../Athena/Config/Configuration.html">Configuration</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Config/ConfigurationResolver" data-name="athena::config::configurationresolver">
      <a href="../../Athena/Config/ConfigurationResolver.html">ConfigurationResolver</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Config/ConfigurationResolverInterface" data-name="athena::config::configurationresolverinterface">
      <a href="../../Athena/Config/ConfigurationResolverInterface.html">ConfigurationResolverInterface</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="github.com/athena-framework/athena/Athena/DI" data-name="athena::di">
      <a href="../../Athena/DI.html">DI</a>
      
        <ul>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/DI/Injectable" data-name="athena::di::injectable">
      <a href="../../Athena/DI/Injectable.html">Injectable</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/DI/Register" data-name="athena::di::register">
      <a href="../../Athena/DI/Register.html">Register</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/DI/Service" data-name="athena::di::service">
      <a href="../../Athena/DI/Service.html">Service</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/DI/ServiceContainer" data-name="athena::di::servicecontainer">
      <a href="../../Athena/DI/ServiceContainer.html">ServiceContainer</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="github.com/athena-framework/athena/Athena/EventDispatcher" data-name="athena::eventdispatcher">
      <a href="../../Athena/EventDispatcher.html">EventDispatcher</a>
      
        <ul>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/EventDispatcher/Event" data-name="athena::eventdispatcher::event">
      <a href="../../Athena/EventDispatcher/Event.html">Event</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/EventDispatcher/EventDispatcher" data-name="athena::eventdispatcher::eventdispatcher">
      <a href="../../Athena/EventDispatcher/EventDispatcher.html">EventDispatcher</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/EventDispatcher/EventDispatcherInterface" data-name="athena::eventdispatcher::eventdispatcherinterface">
      <a href="../../Athena/EventDispatcher/EventDispatcherInterface.html">EventDispatcherInterface</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/EventDispatcher/EventListener" data-name="athena::eventdispatcher::eventlistener">
      <a href="../../Athena/EventDispatcher/EventListener.html">EventListener</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/EventDispatcher/EventListenerInterface" data-name="athena::eventdispatcher::eventlistenerinterface">
      <a href="../../Athena/EventDispatcher/EventListenerInterface.html">EventListenerInterface</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/EventDispatcher/EventListenerType" data-name="athena::eventdispatcher::eventlistenertype">
      <a href="../../Athena/EventDispatcher/EventListenerType.html">EventListenerType</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/EventDispatcher/StoppableEvent" data-name="athena::eventdispatcher::stoppableevent">
      <a href="../../Athena/EventDispatcher/StoppableEvent.html">StoppableEvent</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/EventDispatcher/SubscribedEvents" data-name="athena::eventdispatcher::subscribedevents">
      <a href="../../Athena/EventDispatcher/SubscribedEvents.html">SubscribedEvents</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent open current" data-id="github.com/athena-framework/athena/Athena/Routing" data-name="athena::routing">
      <a href="../../Athena/Routing.html">Routing</a>
      
        <ul>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Action" data-name="athena::routing::action">
      <a href="../../Athena/Routing/Action.html">Action</a>
      
    </li>
  
  <li class="parent " data-id="github.com/athena-framework/athena/Athena/Routing/Config" data-name="athena::routing::config">
      <a href="../../Athena/Routing/Config.html">Config</a>
      
        <ul>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Config/CORS" data-name="athena::routing::config::cors">
      <a href="../../Athena/Routing/Config/CORS.html">CORS</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" current" data-id="github.com/athena-framework/athena/Athena/Routing/Controller" data-name="athena::routing::controller">
      <a href="../../Athena/Routing/Controller.html">Controller</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Delete" data-name="athena::routing::delete">
      <a href="../../Athena/Routing/Delete.html">Delete</a>
      
    </li>
  
  <li class="parent " data-id="github.com/athena-framework/athena/Athena/Routing/Events" data-name="athena::routing::events">
      <a href="../../Athena/Routing/Events.html">Events</a>
      
        <ul>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Events/Context" data-name="athena::routing::events::context">
      <a href="../../Athena/Routing/Events/Context.html">Context</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Events/Exception" data-name="athena::routing::events::exception">
      <a href="../../Athena/Routing/Events/Exception.html">Exception</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Events/Request" data-name="athena::routing::events::request">
      <a href="../../Athena/Routing/Events/Request.html">Request</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Events/Response" data-name="athena::routing::events::response">
      <a href="../../Athena/Routing/Events/Response.html">Response</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Events/Terminate" data-name="athena::routing::events::terminate">
      <a href="../../Athena/Routing/Events/Terminate.html">Terminate</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="github.com/athena-framework/athena/Athena/Routing/Exceptions" data-name="athena::routing::exceptions">
      <a href="../../Athena/Routing/Exceptions.html">Exceptions</a>
      
        <ul>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Exceptions/BadRequest" data-name="athena::routing::exceptions::badrequest">
      <a href="../../Athena/Routing/Exceptions/BadRequest.html">BadRequest</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Exceptions/Conflict" data-name="athena::routing::exceptions::conflict">
      <a href="../../Athena/Routing/Exceptions/Conflict.html">Conflict</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Exceptions/Forbidden" data-name="athena::routing::exceptions::forbidden">
      <a href="../../Athena/Routing/Exceptions/Forbidden.html">Forbidden</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Exceptions/Gone" data-name="athena::routing::exceptions::gone">
      <a href="../../Athena/Routing/Exceptions/Gone.html">Gone</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Exceptions/HTTPException" data-name="athena::routing::exceptions::httpexception">
      <a href="../../Athena/Routing/Exceptions/HTTPException.html">HTTPException</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Exceptions/LengthRequired" data-name="athena::routing::exceptions::lengthrequired">
      <a href="../../Athena/Routing/Exceptions/LengthRequired.html">LengthRequired</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Exceptions/MethodNotAllowed" data-name="athena::routing::exceptions::methodnotallowed">
      <a href="../../Athena/Routing/Exceptions/MethodNotAllowed.html">MethodNotAllowed</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Exceptions/NotAcceptable" data-name="athena::routing::exceptions::notacceptable">
      <a href="../../Athena/Routing/Exceptions/NotAcceptable.html">NotAcceptable</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Exceptions/NotFound" data-name="athena::routing::exceptions::notfound">
      <a href="../../Athena/Routing/Exceptions/NotFound.html">NotFound</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Exceptions/PreconditionFailed" data-name="athena::routing::exceptions::preconditionfailed">
      <a href="../../Athena/Routing/Exceptions/PreconditionFailed.html">PreconditionFailed</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Exceptions/ServiceUnavailable" data-name="athena::routing::exceptions::serviceunavailable">
      <a href="../../Athena/Routing/Exceptions/ServiceUnavailable.html">ServiceUnavailable</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Exceptions/TooManyRequests" data-name="athena::routing::exceptions::toomanyrequests">
      <a href="../../Athena/Routing/Exceptions/TooManyRequests.html">TooManyRequests</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Exceptions/Unauthorized" data-name="athena::routing::exceptions::unauthorized">
      <a href="../../Athena/Routing/Exceptions/Unauthorized.html">Unauthorized</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Exceptions/UnprocessableEntity" data-name="athena::routing::exceptions::unprocessableentity">
      <a href="../../Athena/Routing/Exceptions/UnprocessableEntity.html">UnprocessableEntity</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Exceptions/UnsupportedMediaType" data-name="athena::routing::exceptions::unsupportedmediatype">
      <a href="../../Athena/Routing/Exceptions/UnsupportedMediaType.html">UnsupportedMediaType</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Get" data-name="athena::routing::get">
      <a href="../../Athena/Routing/Get.html">Get</a>
      
    </li>
  
  <li class="parent " data-id="github.com/athena-framework/athena/Athena/Routing/Listeners" data-name="athena::routing::listeners">
      <a href="../../Athena/Routing/Listeners.html">Listeners</a>
      
        <ul>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Listeners/CORS" data-name="athena::routing::listeners::cors">
      <a href="../../Athena/Routing/Listeners/CORS.html">CORS</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Listeners/Routing" data-name="athena::routing::listeners::routing">
      <a href="../../Athena/Routing/Listeners/Routing.html">Routing</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/ParamConverter" data-name="athena::routing::paramconverter">
      <a href="../../Athena/Routing/ParamConverter.html">ParamConverter</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/ParamConverterInterface" data-name="athena::routing::paramconverterinterface(t)">
      <a href="../../Athena/Routing/ParamConverterInterface.html">ParamConverterInterface</a>
      
    </li>
  
  <li class="parent " data-id="github.com/athena-framework/athena/Athena/Routing/Parameters" data-name="athena::routing::parameters">
      <a href="../../Athena/Routing/Parameters.html">Parameters</a>
      
        <ul>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Parameters/Convertable" data-name="athena::routing::parameters::convertable(t)">
      <a href="../../Athena/Routing/Parameters/Convertable.html">Convertable</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Parameters/Param" data-name="athena::routing::parameters::param">
      <a href="../../Athena/Routing/Parameters/Param.html">Param</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Parameters/Parameter" data-name="athena::routing::parameters::parameter(t)">
      <a href="../../Athena/Routing/Parameters/Parameter.html">Parameter</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Parameters/PathParameter" data-name="athena::routing::parameters::pathparameter(t)">
      <a href="../../Athena/Routing/Parameters/PathParameter.html">PathParameter</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Parameters/QueryParameter" data-name="athena::routing::parameters::queryparameter(t)">
      <a href="../../Athena/Routing/Parameters/QueryParameter.html">QueryParameter</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Parameters/RequestParameter" data-name="athena::routing::parameters::requestparameter(t)">
      <a href="../../Athena/Routing/Parameters/RequestParameter.html">RequestParameter</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Parameters/ResponseParameter" data-name="athena::routing::parameters::responseparameter(t)">
      <a href="../../Athena/Routing/Parameters/ResponseParameter.html">ResponseParameter</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Patch" data-name="athena::routing::patch">
      <a href="../../Athena/Routing/Patch.html">Patch</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Post" data-name="athena::routing::post">
      <a href="../../Athena/Routing/Post.html">Post</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Prefix" data-name="athena::routing::prefix">
      <a href="../../Athena/Routing/Prefix.html">Prefix</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Put" data-name="athena::routing::put">
      <a href="../../Athena/Routing/Put.html">Put</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/QueryParam" data-name="athena::routing::queryparam">
      <a href="../../Athena/Routing/QueryParam.html">QueryParam</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/RequestStore" data-name="athena::routing::requeststore">
      <a href="../../Athena/Routing/RequestStore.html">RequestStore</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/Route" data-name="athena::routing::route(controller, actiontype, returntype, *argtypes)">
      <a href="../../Athena/Routing/Route.html">Route</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/RouteHandler" data-name="athena::routing::routehandler">
      <a href="../../Athena/Routing/RouteHandler.html">RouteHandler</a>
      
    </li>
  
  <li class=" " data-id="github.com/athena-framework/athena/Athena/Routing/RouteResolver" data-name="athena::routing::routeresolver">
      <a href="../../Athena/Routing/RouteResolver.html">RouteResolver</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1 class="type-name">

  <span class="kind">abstract class</span> Athena::Routing::Controller

</h1>


  <ul class="superclass-hierarchy"><li class="superclass"><a href="../../Athena/Routing/Controller.html">Athena::Routing::Controller</a></li><li class="superclass">Reference</li><li class="superclass">Object</li></ul>




  <h2>
    <a id="overview" class="anchor" href="#overview">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Overview
  </h2>

  <p>The core of any framework is routing; how a route is tied to an action.  Athena takes an annotation based approach; an annotation, such as <code><a href="../../Athena/Routing/Get.html">ART::Get</a></code> is applied to an instance method of a controller class,
which will be executed when that endpoint receives a request.  The annotation includes the path as well as any constraints that a parameter must meet in order for the route to be invoked.</p>

<p>Additional annotations also exist for setting a query param or a parm converter.  See <code><a href="../../Athena/Routing/QueryParam.html">ART::QueryParam</a></code> and <code><a href="../../Athena/Routing/ParamConverter.html">ART::ParamConverter</a></code> respectively.</p>

<p>Child controllers must inherit from <code><a href="../../Athena/Routing/Controller.html">ART::Controller</a></code> (or an abstract child of it).  Each request gets its own instance of the controller to better allow for DI via <code><a href="../../Athena/DI.html">Athena::DI</a></code>.</p>

<p>The return type of an action does <em>NOT</em> have to be <code>String</code>.  Currently the response value is serialized by calling <code>.to_json</code> on the value.
In the future a more flexible/proper view layer will be implemented.</p>

<h3><a id="example" class="anchor" href="#example">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Example</h3>

<p>The following controller shows examples of the various routing features of Athena.  <code><a href="../../Athena/Routing/Controller.html">ART::Controller</a></code> also defines various macro DSLs, such as <code><a href="../../Athena/Routing/Controller.html#get(path,*args,**named_args,&)-macro">ART::Controller.get</a></code> to make defining routes
seem more Sinatra/Kemal like.  See the documentation on the macros for more details.</p>

<pre><code><span class="k">require</span> <span class="s">&quot;athena&quot;</span>

<span class="c"># The `ART::Prefix` annotation can be applied to a controller to define a prefix to use for all routes within `self`.</span>
@[<span class="t">ART</span><span class="t">::</span><span class="t">Prefix</span>(<span class="s">&quot;athena&quot;</span>)]
<span class="k">class</span> <span class="t">TestController</span> <span class="o">&lt;</span> <span class="t">ART</span><span class="t">::</span><span class="t">Controller</span>
  <span class="c"># A GET endpoint with no params returning a `String`.</span>
  <span class="c">#</span>
  <span class="c"># Action return type restrictions are required.</span>
  @[<span class="t">ART</span><span class="t">::</span><span class="t">Get</span>(path: <span class="s">&quot;/me&quot;</span>)]
  <span class="k">def</span> <span class="m">get_me</span> : <span class="t">String</span>
    <span class="s">&quot;Jim&quot;</span>
  <span class="k">end</span>

  <span class="c"># A GET endpoint with no params returning `Nil`.</span>
  <span class="c"># `Nil` return types are returned with a status</span>
  <span class="c"># of 204 no content</span>
  @[<span class="t">ART</span><span class="t">::</span><span class="t">Get</span>(path: <span class="s">&quot;/no_content&quot;</span>)]
  <span class="k">def</span> <span class="m">get_no_content</span> : <span class="t">Nil</span>
    <span class="c"># Do stuff</span>
  <span class="k">end</span>

  <span class="c"># A GET endpoint with two `Int32` params returning an `Int32`.</span>
  <span class="c">#</span>
  <span class="c"># The parameters of a route _MUST_ match the arguments of the action.</span>
  <span class="c"># Type restrictions on action arguments are required.</span>
  @[<span class="t">ART</span><span class="t">::</span><span class="t">Get</span>(path: <span class="s">&quot;/add/:val1/:val2&quot;</span>)]
  <span class="k">def</span> <span class="m">add</span>(val1 : <span class="t">Int32</span>, val2 : <span class="t">Int32</span>) : <span class="t">Int32</span>
    val1 <span class="o">+</span> val2
  <span class="k">end</span>

  <span class="c"># A GET endpoint with an `String` route param, and a required string query param that must match the given pattern; returning a `String`.</span>
  <span class="c">#</span>
  <span class="c"># A non-nilable type denotes it as required.  If the parameter is not supplied, and no default value is assigned, an `ART::Exceptions::BadRequest` exception is raised.</span>
  @[<span class="t">ART</span><span class="t">::</span><span class="t">QueryParam</span>(<span class="s">&quot;time&quot;</span>, constraints: <span class="s">/\d:\d:\d/</span>)]
  @[<span class="t">ART</span><span class="t">::</span><span class="t">Get</span>(path: <span class="s">&quot;/event/:event_name/&quot;</span>)]
  <span class="k">def</span> <span class="m">event_time</span>(event_name : <span class="t">String</span>, time : <span class="t">String</span>) : <span class="t">String</span>
    <span class="s">&quot;</span><span class="i">#{</span>event_name<span class="i">}</span><span class="s"> occurred at </span><span class="i">#{</span>time<span class="i">}</span><span class="s">&quot;</span>
  <span class="k">end</span>

  <span class="c"># A GET endpoint with an optional query parameter and optional path param with a default value; returning a `NamedTuple(user_id : Int32?, page : Int32)`.</span>
  <span class="c">#</span>
  <span class="c"># A nilable type denotes it as optional.  If the parameter is not supplied (or could not be converted), and no default value is assigned, it is `nil`.</span>
  @[<span class="t">ART</span><span class="t">::</span><span class="t">QueryParam</span>(<span class="s">&quot;user_id&quot;</span>)]
  @[<span class="t">ART</span><span class="t">::</span><span class="t">Get</span>(path: <span class="s">&quot;/events/(:page)&quot;</span>)]
  <span class="k">def</span> <span class="m">events</span>(user_id : <span class="t">Int32</span>?, page : <span class="t">Int32</span> <span class="o">=</span> <span class="n">1</span>) : <span class="t">NamedTuple</span>(user_id: <span class="t">Int32</span>?, page: <span class="t">Int32</span>)
    {user_id: user_id, page: page}
  <span class="k">end</span>

  <span class="c"># A GET endpoint with param constraints.  The param must match the supplied Regex or it will not match and return a 404 error.</span>
  @[<span class="t">ART</span><span class="t">::</span><span class="t">Get</span>(path: <span class="s">&quot;/time/:time/&quot;</span>, constraints: {<span class="s">&quot;time&quot;</span> => <span class="s">/\d{2}:\d{2}:\d{2}/</span>})]
  <span class="k">def</span> <span class="m">get_constraint</span>(time : <span class="t">String</span>) : <span class="t">String</span>
    time
  <span class="k">end</span>

  <span class="c"># A POST endpoint with a route param and accessing the request body; returning a `Bool`.</span>
  <span class="c">#</span>
  <span class="c"># It is recommended to use param converters to pass an actual object representing the data (assuming the body is JSON)</span>
  <span class="c"># to the route&#39;s action; however the raw request body can be accessed by typing an action argument as `HTTP::Request`.</span>
  @[<span class="t">ART</span><span class="t">::</span><span class="t">Post</span>(path: <span class="s">&quot;/test/:expected&quot;</span>)]
  <span class="k">def</span> <span class="m">post_body</span>(expected : <span class="t">String</span>, request : <span class="t">HTTP</span><span class="t">::</span><span class="t">Request</span>) : <span class="t">Bool</span>
    expected <span class="o">==</span> request.body.try <span class="o">&amp;</span>.gets_to_end
  <span class="k">end</span>
<span class="k">end</span>

<span class="t">ART</span>.run

<span class="t">CLIENT</span> <span class="o">=</span> <span class="t">HTTP</span><span class="t">::</span><span class="t">Client</span>.<span class="k">new</span> <span class="s">&quot;localhost&quot;</span>, <span class="n">3000</span>

<span class="t">CLIENT</span>.get(<span class="s">&quot;/athena/me&quot;</span>).body                      <span class="c"># =&gt; &quot;Jim&quot;</span>
<span class="t">CLIENT</span>.get(<span class="s">&quot;/athena/add/50/25&quot;</span>).body               <span class="c"># =&gt; 75</span>
<span class="t">CLIENT</span>.get(<span class="s">&quot;/athena/event/foobar?time=1:1:1&quot;</span>).body <span class="c"># =&gt; &quot;foobar occurred at 1:1:1&quot;</span>
<span class="t">CLIENT</span>.get(<span class="s">&quot;/athena/events&quot;</span>).body                  <span class="c"># =&gt; {&quot;user_id&quot;:null,&quot;page&quot;:1}</span>
<span class="t">CLIENT</span>.get(<span class="s">&quot;/athena/events/17?user_id=19&quot;</span>).body    <span class="c"># =&gt; {&quot;user_id&quot;:19,&quot;page&quot;:17}</span>
<span class="t">CLIENT</span>.get(<span class="s">&quot;/athena/time/12:45:30&quot;</span>).body           <span class="c"># =&gt; &quot;12:45:30&quot;</span>
<span class="t">CLIENT</span>.get(<span class="s">&quot;/athena/time/12:aa:30&quot;</span>).body           <span class="c"># =&gt; 404 not found</span>
<span class="t">CLIENT</span>.get(<span class="s">&quot;/athena/no_content&quot;</span>).body              <span class="c"># =&gt; 204 no content</span>
<span class="t">CLIENT</span>.post(<span class="s">&quot;/athena/test/foo&quot;</span>, body: <span class="s">&quot;foo&quot;</span>).body  <span class="c"># =&gt; true</span></code></pre>














  <h2>
    <a id="defined-in" class="anchor" href="#defined-in">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Defined in:
  </h2>
  
    
      <a href="https://github.com/athena-framework/athena/blob/57e73a001fbae701da8f21a29c83045cb8b23bc7/src/controller.cr#L94" target="_blank">
        controller.cr
      </a>
    
    <br/>
  











  <h2>
    <a id="macro-summary" class="anchor" href="#macro-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Macro Summary
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#delete(path,*args,**named_args,&)-macro" class="signature"><strong>delete</strong>(path, *args, **named_args, &)</a>
        
          <div class="summary"><p>Helper DSL macro for creating <code>DELETE</code> actions.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#get(path,*args,**named_args,&)-macro" class="signature"><strong>get</strong>(path, *args, **named_args, &)</a>
        
          <div class="summary"><p>Helper DSL macro for creating <code>GET</code> actions.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#patch(path,*args,**named_args,&)-macro" class="signature"><strong>patch</strong>(path, *args, **named_args, &)</a>
        
          <div class="summary"><p>Helper DSL macro for creating <code>PATCH</code> actions.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#post(path,*args,**named_args,&)-macro" class="signature"><strong>post</strong>(path, *args, **named_args, &)</a>
        
          <div class="summary"><p>Helper DSL macro for creating <code>POST</code> actions.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#put(path,*args,**named_args,&)-macro" class="signature"><strong>put</strong>(path, *args, **named_args, &)</a>
        
          <div class="summary"><p>Helper DSL macro for creating <code>PUT</code> actions.</p></div>
        
      </li>
    
  </ul>



<div class="methods-inherited">
  
    


    


    


  
    


    


    

  <h3>Class methods inherited from class <code>Object</code></h3>
  
  
    <a href="../../Object.html#from_parameter(value:String?):String?-class-method" class="tooltip">
      <span>from_parameter(value : String?) : String?</span>
    from_parameter</a>
    
  


  
</div>








  <h2>
    <a id="macro-detail" class="anchor" href="#macro-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Macro Detail
  </h2>
  
    <div class="entry-detail" id="delete(path,*args,**named_args,&amp;)-macro">
      <div class="signature">
        
        macro <strong>delete</strong>(path, *args, **named_args, &)

        <a class="method-permalink" href="#delete(path,*args,**named_args,&)-macro">#</a>
      </div>
      
        <div class="doc">
          
          <p>Helper DSL macro for creating <code>DELETE</code> actions.</p>

<p>The first argument is the path that the action should handle; which maps to path on the HTTP method annotation.
The second argument is a variable amount of arguments with a syntax similar to Crystal's <code>record</code>.
There are also a few optional named arguments that map to the corresponding field on the HTTP method annotation.</p>

<p>The macro simply defines a method based on the options passed to it.  Additional annotations, such as for query params
or a param converter can simply be added on top of the macro.</p>

<h3><a id="optional-named-arguments" class="anchor" href="#optional-named-arguments">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Optional Named Arguments</h3>

<ul><li><code>return_type</code> - The return type to set for the action.  Defaults to <code>String</code> if not provided.</li><li><code>constraints</code> - Any constraints that should be applied to the route.</li></ul>

<h3><a id="example" class="anchor" href="#example">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Example</h3>

<pre><code><span class="k">class</span> <span class="t">ExampleController</span> <span class="o">&lt;</span> <span class="t">ART</span><span class="t">::</span><span class="t">Controller</span>
  delete <span class="s">&quot;values/:value1/:value2&quot;</span>, value1 : <span class="t">Int32</span>, value2 : <span class="t">Float64</span>, constraints: {<span class="s">&quot;value1&quot;</span> => <span class="s">/\d+/</span>, <span class="s">&quot;value2&quot;</span> => <span class="s">/\d+\.\d+} do
    &quot;Value1: </span><span class="i">#{</span>value1<span class="i">}</span><span class="s"> - Value2: </span><span class="i">#{</span>value2<span class="i">}</span><span class="s">&quot;&quot;
  end
end</code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/athena-framework/athena/blob/57e73a001fbae701da8f21a29c83045cb8b23bc7/src/controller.cr#L95" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="get(path,*args,**named_args,&amp;)-macro">
      <div class="signature">
        
        macro <strong>get</strong>(path, *args, **named_args, &)

        <a class="method-permalink" href="#get(path,*args,**named_args,&)-macro">#</a>
      </div>
      
        <div class="doc">
          
          <p>Helper DSL macro for creating <code>GET</code> actions.</p>

<p>The first argument is the path that the action should handle; which maps to path on the HTTP method annotation.
The second argument is a variable amount of arguments with a syntax similar to Crystal's <code>record</code>.
There are also a few optional named arguments that map to the corresponding field on the HTTP method annotation.</p>

<p>The macro simply defines a method based on the options passed to it.  Additional annotations, such as for query params
or a param converter can simply be added on top of the macro.</p>

<h3><a id="optional-named-arguments" class="anchor" href="#optional-named-arguments">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Optional Named Arguments</h3>

<ul><li><code>return_type</code> - The return type to set for the action.  Defaults to <code>String</code> if not provided.</li><li><code>constraints</code> - Any constraints that should be applied to the route.</li></ul>

<h3><a id="example" class="anchor" href="#example">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Example</h3>

<pre><code><span class="k">class</span> <span class="t">ExampleController</span> <span class="o">&lt;</span> <span class="t">ART</span><span class="t">::</span><span class="t">Controller</span>
  get <span class="s">&quot;values/:value1/:value2&quot;</span>, value1 : <span class="t">Int32</span>, value2 : <span class="t">Float64</span>, constraints: {<span class="s">&quot;value1&quot;</span> => <span class="s">/\d+/</span>, <span class="s">&quot;value2&quot;</span> => <span class="s">/\d+\.\d+} do
    &quot;Value1: </span><span class="i">#{</span>value1<span class="i">}</span><span class="s"> - Value2: </span><span class="i">#{</span>value2<span class="i">}</span><span class="s">&quot;&quot;
  end
end</code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/athena-framework/athena/blob/57e73a001fbae701da8f21a29c83045cb8b23bc7/src/controller.cr#L95" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="patch(path,*args,**named_args,&amp;)-macro">
      <div class="signature">
        
        macro <strong>patch</strong>(path, *args, **named_args, &)

        <a class="method-permalink" href="#patch(path,*args,**named_args,&)-macro">#</a>
      </div>
      
        <div class="doc">
          
          <p>Helper DSL macro for creating <code>PATCH</code> actions.</p>

<p>The first argument is the path that the action should handle; which maps to path on the HTTP method annotation.
The second argument is a variable amount of arguments with a syntax similar to Crystal's <code>record</code>.
There are also a few optional named arguments that map to the corresponding field on the HTTP method annotation.</p>

<p>The macro simply defines a method based on the options passed to it.  Additional annotations, such as for query params
or a param converter can simply be added on top of the macro.</p>

<h3><a id="optional-named-arguments" class="anchor" href="#optional-named-arguments">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Optional Named Arguments</h3>

<ul><li><code>return_type</code> - The return type to set for the action.  Defaults to <code>String</code> if not provided.</li><li><code>constraints</code> - Any constraints that should be applied to the route.</li></ul>

<h3><a id="example" class="anchor" href="#example">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Example</h3>

<pre><code><span class="k">class</span> <span class="t">ExampleController</span> <span class="o">&lt;</span> <span class="t">ART</span><span class="t">::</span><span class="t">Controller</span>
  patch <span class="s">&quot;values/:value1/:value2&quot;</span>, value1 : <span class="t">Int32</span>, value2 : <span class="t">Float64</span>, constraints: {<span class="s">&quot;value1&quot;</span> => <span class="s">/\d+/</span>, <span class="s">&quot;value2&quot;</span> => <span class="s">/\d+\.\d+} do
    &quot;Value1: </span><span class="i">#{</span>value1<span class="i">}</span><span class="s"> - Value2: </span><span class="i">#{</span>value2<span class="i">}</span><span class="s">&quot;&quot;
  end
end</code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/athena-framework/athena/blob/57e73a001fbae701da8f21a29c83045cb8b23bc7/src/controller.cr#L95" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="post(path,*args,**named_args,&amp;)-macro">
      <div class="signature">
        
        macro <strong>post</strong>(path, *args, **named_args, &)

        <a class="method-permalink" href="#post(path,*args,**named_args,&)-macro">#</a>
      </div>
      
        <div class="doc">
          
          <p>Helper DSL macro for creating <code>POST</code> actions.</p>

<p>The first argument is the path that the action should handle; which maps to path on the HTTP method annotation.
The second argument is a variable amount of arguments with a syntax similar to Crystal's <code>record</code>.
There are also a few optional named arguments that map to the corresponding field on the HTTP method annotation.</p>

<p>The macro simply defines a method based on the options passed to it.  Additional annotations, such as for query params
or a param converter can simply be added on top of the macro.</p>

<h3><a id="optional-named-arguments" class="anchor" href="#optional-named-arguments">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Optional Named Arguments</h3>

<ul><li><code>return_type</code> - The return type to set for the action.  Defaults to <code>String</code> if not provided.</li><li><code>constraints</code> - Any constraints that should be applied to the route.</li></ul>

<h3><a id="example" class="anchor" href="#example">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Example</h3>

<pre><code><span class="k">class</span> <span class="t">ExampleController</span> <span class="o">&lt;</span> <span class="t">ART</span><span class="t">::</span><span class="t">Controller</span>
  post <span class="s">&quot;values/:value1/:value2&quot;</span>, value1 : <span class="t">Int32</span>, value2 : <span class="t">Float64</span>, constraints: {<span class="s">&quot;value1&quot;</span> => <span class="s">/\d+/</span>, <span class="s">&quot;value2&quot;</span> => <span class="s">/\d+\.\d+} do
    &quot;Value1: </span><span class="i">#{</span>value1<span class="i">}</span><span class="s"> - Value2: </span><span class="i">#{</span>value2<span class="i">}</span><span class="s">&quot;&quot;
  end
end</code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/athena-framework/athena/blob/57e73a001fbae701da8f21a29c83045cb8b23bc7/src/controller.cr#L95" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="put(path,*args,**named_args,&amp;)-macro">
      <div class="signature">
        
        macro <strong>put</strong>(path, *args, **named_args, &)

        <a class="method-permalink" href="#put(path,*args,**named_args,&)-macro">#</a>
      </div>
      
        <div class="doc">
          
          <p>Helper DSL macro for creating <code>PUT</code> actions.</p>

<p>The first argument is the path that the action should handle; which maps to path on the HTTP method annotation.
The second argument is a variable amount of arguments with a syntax similar to Crystal's <code>record</code>.
There are also a few optional named arguments that map to the corresponding field on the HTTP method annotation.</p>

<p>The macro simply defines a method based on the options passed to it.  Additional annotations, such as for query params
or a param converter can simply be added on top of the macro.</p>

<h3><a id="optional-named-arguments" class="anchor" href="#optional-named-arguments">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Optional Named Arguments</h3>

<ul><li><code>return_type</code> - The return type to set for the action.  Defaults to <code>String</code> if not provided.</li><li><code>constraints</code> - Any constraints that should be applied to the route.</li></ul>

<h3><a id="example" class="anchor" href="#example">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Example</h3>

<pre><code><span class="k">class</span> <span class="t">ExampleController</span> <span class="o">&lt;</span> <span class="t">ART</span><span class="t">::</span><span class="t">Controller</span>
  put <span class="s">&quot;values/:value1/:value2&quot;</span>, value1 : <span class="t">Int32</span>, value2 : <span class="t">Float64</span>, constraints: {<span class="s">&quot;value1&quot;</span> => <span class="s">/\d+/</span>, <span class="s">&quot;value2&quot;</span> => <span class="s">/\d+\.\d+} do
    &quot;Value1: </span><span class="i">#{</span>value1<span class="i">}</span><span class="s"> - Value2: </span><span class="i">#{</span>value2<span class="i">}</span><span class="s">&quot;&quot;
  end
end</code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/athena-framework/athena/blob/57e73a001fbae701da8f21a29c83045cb8b23bc7/src/controller.cr#L95" target="_blank">View source</a>]
        
      </div>
    </div>
  


</div>

</body>
</html>
